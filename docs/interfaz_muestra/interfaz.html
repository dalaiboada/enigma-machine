<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Simulación Enigma (HTML/JS)</title>
  <link rel="stylesheet" href="interfaz.css" />
</head>
<body>
  <div class="app">
    <h1>Simulación Enigma — HTML/JS</h1>
    <div class="small">Pulsa una tecla en el teclado o haz clic en una tecla de la UI. Observa la trayectoria de la señal, las lámparas y el giro de los rotores.</div>

    <div class="layout">
      <div class="card">
        <div class="label">Rotores & posiciones</div>
        <div style="margin-top:8px" class="rotor-row">
          <div class="rotor" id="rotor-left">
            <div class="label">Izquierdo</div>
            <div style="margin-top:8px"><select id="rotorLeftSelect"></select></div>
            <div style="margin-top:8px"><span class="dial" id="leftPos">A</span></div>
          </div>
          <div class="rotor" id="rotor-mid">
            <div class="label">Medio</div>
            <div style="margin-top:8px"><select id="rotorMidSelect"></select></div>
            <div style="margin-top:8px"><span class="dial" id="midPos">A</span></div>
          </div>
          <div class="rotor" id="rotor-right">
            <div class="label">Derecho</div>
            <div style="margin-top:8px"><select id="rotorRightSelect"></select></div>
            <div style="margin-top:8px"><span class="dial" id="rightPos">A</span></div>
          </div>
        </div>

        <div style="margin-top:12px" class="label">Reflector</div>
        <div style="margin-top:8px"><select id="reflectorSelect"></select></div>

        <div style="margin-top:12px" class="label">Panel de clavijas (Plugboard)</div>
        <div style="margin-top:8px" class="plugboard" id="plugPairs"></div>
        <div style="margin-top:8px" class="controls">
          <input id="addPair" placeholder="Ej: A G" />
          <button class="btn" id="btnAdd">Agregar</button>
          <button class="btn" id="btnClear">Borrar pares</button>
        </div>

        <div style="margin-top:12px" class="label">Lámparas</div>
        <div class="lights" id="lamps"></div>

        <div style="margin-top:12px" class="label">Trayectoria (última tecla)</div>
        <div class="path" id="path"></div>

        <div style="margin-top:12px" class="config">
          <div>
            <div class="small">Notch (muestra posiciones que provocan paso del rotor de la izquierda)</div>
            <div id="notches" class="small" style="margin-top:6px"></div>
          </div>
          <div>
            <div class="small">Stepping: implementado con doble-stepping simplificado</div>
            <div class="small" style="margin-top:6px">Rotar -> rotor derecho siempre. Si rotor derecho al avanzar llega a su notch, hace girar al rotor medio. Si rotor medio está en notch, rotará también el rotor izquierdo (double-step).</div>
          </div>
        </div>

      </div>

      <div class="card">
        <div class="label">Teclado</div>
        <div class="keyboard" id="keyboard"></div>

        <div style="margin-top:12px" class="label">Salida: presión tecla</div>
        <div style="margin-top:6px" class="wire" id="outputWire"></div>

        <div style="margin-top:12px" class="label">Controles</div>
        <div style="margin-top:6px" class="controls">
          <button class="btn" id="btnReset">Reset posiciones (AAA)</button>
          <button class="btn" id="randomize">Aleatorizar posiciones</button>
        </div>
      </div>
      
    </div>
  </div>

  <script src="interfaz.js"></script>
</body>
</html>
